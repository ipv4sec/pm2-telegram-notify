"use strict";
const pmx = require('pmx');
const pm2 = require('pm2');
const TelegramBot = require('node-telegram-bot-api');
let probe = pmx.probe();
let conf = pmx.initModule({
    widget: {
        type: 'generic',
        logo: 'http://www.creativetechs.com/iq/tip_images/TerminalApp-Icon.png',
        theme: ['#111111', '#1B2228', '#807C7C', '#807C7C'],
        el: {
            probes: false,
            actions: false
        },
        block: {
            actions: false,
            issues: false,
            meta: false,
            cpu: false,
            mem: false,
            main_probes: ['chatId', 'token']
        }
    }
});
probe.metric({
    name: 'chatId',
    value: function () {
        return conf.chatId;
    }
});
probe.metric({
    name: 'token',
    value: function () {
        return conf.token;
    }
});
const bot = new TelegramBot(conf.token, { polling: true });
pm2.launchBus(function (err, bus) {
    if (err) {
        throw err;
    }
    bus.on('process:event', function (e) {
        if (e.manually === true) {
            return;
        }
        bot.sendMessage(conf.chatId, JSON.stringify(e));
    });
    bus.on('pm2:kill', function () {
        console.error('PM2 is beeing killed');
    });
});

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9hcHAudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLE1BQU0sR0FBRyxHQUFHLE9BQU8sQ0FBQyxLQUFLLENBQUMsQ0FBQTtBQUMxQixNQUFNLEdBQUcsR0FBRyxPQUFPLENBQUMsS0FBSyxDQUFDLENBQUE7QUFDMUIsTUFBTSxXQUFXLEdBQUcsT0FBTyxDQUFDLHVCQUF1QixDQUFDLENBQUE7QUFDcEQsSUFBSSxLQUFLLEdBQUcsR0FBRyxDQUFDLEtBQUssRUFBRSxDQUFBO0FBQ3ZCLElBQUksSUFBSSxHQUFHLEdBQUcsQ0FBQyxVQUFVLENBQUM7SUFDeEIsTUFBTSxFQUFHO1FBQ1AsSUFBSSxFQUFlLFNBQVM7UUFDNUIsSUFBSSxFQUFlLGlFQUFpRTtRQUNwRixLQUFLLEVBQWMsQ0FBQyxTQUFTLEVBQUUsU0FBUyxFQUFFLFNBQVMsRUFBRSxTQUFTLENBQUM7UUFDL0QsRUFBRSxFQUFHO1lBQ0gsTUFBTSxFQUFJLEtBQUs7WUFDZixPQUFPLEVBQUcsS0FBSztTQUNoQjtRQUNELEtBQUssRUFBRztZQUNOLE9BQU8sRUFBRyxLQUFLO1lBQ2YsTUFBTSxFQUFJLEtBQUs7WUFDZixJQUFJLEVBQU0sS0FBSztZQUNmLEdBQUcsRUFBRSxLQUFLO1lBQ1YsR0FBRyxFQUFFLEtBQUs7WUFDVixXQUFXLEVBQUcsQ0FBQyxRQUFRLEVBQUUsT0FBTyxDQUFDO1NBQ2xDO0tBQ0Y7Q0FDRixDQUFDLENBQUE7QUFFRixLQUFLLENBQUMsTUFBTSxDQUFDO0lBQ1gsSUFBSSxFQUFFLFFBQVE7SUFDZCxLQUFLLEVBQUU7UUFDTCxNQUFNLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQTtJQUNwQixDQUFDO0NBQ0YsQ0FBQyxDQUFBO0FBRUYsS0FBSyxDQUFDLE1BQU0sQ0FBQztJQUNYLElBQUksRUFBRSxPQUFPO0lBQ2IsS0FBSyxFQUFFO1FBQ0wsTUFBTSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUE7SUFDbkIsQ0FBQztDQUNGLENBQUMsQ0FBQTtBQUNGLE1BQU0sR0FBRyxHQUFHLElBQUksV0FBVyxDQUFDLElBQUksQ0FBQyxLQUFLLEVBQUUsRUFBQyxPQUFPLEVBQUUsSUFBSSxFQUFDLENBQUMsQ0FBQTtBQUN4RCxHQUFHLENBQUMsU0FBUyxDQUFDLFVBQVUsR0FBVSxFQUFFLEdBQVE7SUFDMUMsRUFBRSxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztRQUNSLE1BQU0sR0FBRyxDQUFBO0lBQ1gsQ0FBQztJQUNELEdBQUcsQ0FBQyxFQUFFLENBQUMsZUFBZSxFQUFFLFVBQVUsQ0FBTTtRQUN0QyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsUUFBUSxLQUFLLElBQUksQ0FBQyxDQUFDLENBQUM7WUFDeEIsTUFBTSxDQUFBO1FBQ1IsQ0FBQztRQUNELEdBQUcsQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLE1BQU0sRUFBRSxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUE7SUFDakQsQ0FBQyxDQUFDLENBQUE7SUFDRixHQUFHLENBQUMsRUFBRSxDQUFDLFVBQVUsRUFBRTtRQUNqQixPQUFPLENBQUMsS0FBSyxDQUFDLHNCQUFzQixDQUFDLENBQUE7SUFDdkMsQ0FBQyxDQUFDLENBQUE7QUFDSixDQUFDLENBQUMsQ0FBQSIsImZpbGUiOiJhcHAuanMiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBwbXggPSByZXF1aXJlKCdwbXgnKVxyXG5jb25zdCBwbTIgPSByZXF1aXJlKCdwbTInKVxyXG5jb25zdCBUZWxlZ3JhbUJvdCA9IHJlcXVpcmUoJ25vZGUtdGVsZWdyYW0tYm90LWFwaScpXHJcbmxldCBwcm9iZSA9IHBteC5wcm9iZSgpXHJcbmxldCBjb25mID0gcG14LmluaXRNb2R1bGUoe1xyXG4gIHdpZGdldCA6IHtcclxuICAgIHR5cGUgICAgICAgICAgICAgOiAnZ2VuZXJpYycsXHJcbiAgICBsb2dvICAgICAgICAgICAgIDogJ2h0dHA6Ly93d3cuY3JlYXRpdmV0ZWNocy5jb20vaXEvdGlwX2ltYWdlcy9UZXJtaW5hbEFwcC1JY29uLnBuZycsXHJcbiAgICB0aGVtZSAgICAgICAgICAgIDogWycjMTExMTExJywgJyMxQjIyMjgnLCAnIzgwN0M3QycsICcjODA3QzdDJ10sXHJcbiAgICBlbCA6IHtcclxuICAgICAgcHJvYmVzICA6IGZhbHNlLFxyXG4gICAgICBhY3Rpb25zIDogZmFsc2VcclxuICAgIH0sXHJcbiAgICBibG9jayA6IHtcclxuICAgICAgYWN0aW9ucyA6IGZhbHNlLFxyXG4gICAgICBpc3N1ZXMgIDogZmFsc2UsXHJcbiAgICAgIG1ldGEgICAgOiBmYWxzZSxcclxuICAgICAgY3B1OiBmYWxzZSxcclxuICAgICAgbWVtOiBmYWxzZSxcclxuICAgICAgbWFpbl9wcm9iZXMgOiBbJ2NoYXRJZCcsICd0b2tlbiddXHJcbiAgICB9XHJcbiAgfVxyXG59KVxyXG5cclxucHJvYmUubWV0cmljKHtcclxuICBuYW1lOiAnY2hhdElkJyxcclxuICB2YWx1ZTogZnVuY3Rpb24gKCkge1xyXG4gICAgcmV0dXJuIGNvbmYuY2hhdElkXHJcbiAgfVxyXG59KVxyXG5cclxucHJvYmUubWV0cmljKHtcclxuICBuYW1lOiAndG9rZW4nLFxyXG4gIHZhbHVlOiBmdW5jdGlvbiAoKSB7XHJcbiAgICByZXR1cm4gY29uZi50b2tlblxyXG4gIH1cclxufSlcclxuY29uc3QgYm90ID0gbmV3IFRlbGVncmFtQm90KGNvbmYudG9rZW4sIHtwb2xsaW5nOiB0cnVlfSlcclxucG0yLmxhdW5jaEJ1cyhmdW5jdGlvbiAoZXJyOiBFcnJvciwgYnVzOiBhbnkpIHtcclxuICBpZiAoZXJyKSB7XHJcbiAgICB0aHJvdyBlcnJcclxuICB9XHJcbiAgYnVzLm9uKCdwcm9jZXNzOmV2ZW50JywgZnVuY3Rpb24gKGU6IGFueSkge1xyXG4gICAgaWYgKGUubWFudWFsbHkgPT09IHRydWUpIHtcclxuICAgICAgcmV0dXJuXHJcbiAgICB9XHJcbiAgICBib3Quc2VuZE1lc3NhZ2UoY29uZi5jaGF0SWQsIEpTT04uc3RyaW5naWZ5KGUpKVxyXG4gIH0pXHJcbiAgYnVzLm9uKCdwbTI6a2lsbCcsIGZ1bmN0aW9uICgpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ1BNMiBpcyBiZWVpbmcga2lsbGVkJylcclxuICB9KVxyXG59KVxyXG4iXX0=
